# Ensure Redis Stack is running before executing tests:
# docker compose up -d redis
# (Expose it locally at redis://127.0.0.1:6379 as defined in docker-compose.yml)
# Optionally export once: export REDIS_URL=redis://127.0.0.1:6379

# OpenAI provider (no Redis dependency)
npx vitest run test/openai.provider.spec.ts --reporter=verbose

# Vector ingestion route
REDIS_URL=redis://127.0.0.1:6379 npx vitest run test/cache.vector.ingestion.spec.ts --reporter=verbose

# Redis-backed KV (requires Redis running)
REDIS_URL=redis://127.0.0.1:6379 npx vitest run test/l1.kv.spec.ts --reporter=verbose

# Vector search
REDIS_URL=redis://127.0.0.1:6379 npx vitest run test/search.vector.spec.ts --reporter=verbose

# End-to-end cache + vector search (requires Redis Stack with RediSearch)
REDIS_URL=redis://127.0.0.1:6379 npx vitest run test/e2e.vector.spec.ts --reporter=verbose
